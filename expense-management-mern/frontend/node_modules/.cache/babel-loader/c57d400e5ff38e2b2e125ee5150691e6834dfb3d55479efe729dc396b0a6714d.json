{"ast":null,"code":"import React,{useEffect}from'react';import{useParams,Link}from'react-router-dom';import{useExpense}from'../context/ExpenseContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ExpenseDetails=()=>{const{id}=useParams();const{getExpense,currentExpense,loading}=useExpense();useEffect(()=>{if(id){getExpense(id);}},[id]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Loading expense details...\"})]});}if(!currentExpense){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Expense not found\"}),/*#__PURE__*/_jsx(Link,{to:\"/expenses\",className:\"btn btn-primary\",children:\"Back to Expenses\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"fade-in\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h2 mb-0\",children:\"Expense Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:currentExpense.title})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/expenses\",className:\"btn btn-outline-secondary me-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left me-1\"}),\"Back\"]}),currentExpense.status==='PENDING'&&/*#__PURE__*/_jsxs(Link,{to:\"/expenses/\".concat(id,\"/edit\"),className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit me-1\"}),\"Edit\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{children:currentExpense.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:currentExpense.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" $\",currentExpense.amount,\" \",currentExpense.currency]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",currentExpense.category.replace('_',' ')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(currentExpense.expenseDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(currentExpense.status.toLowerCase()),children:currentExpense.status})]})]})]}),currentExpense.receipts&&currentExpense.receipts.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Receipts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:currentExpense.receipts.map((receipt,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/uploads/receipts/\".concat(receipt.filename),alt:receipt.originalName,className:\"receipt-preview img-fluid\"})},index))})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"card-title mb-0\",children:\"Approval Timeline\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"expense-timeline\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-semibold\",children:\"Submitted\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:new Date(currentExpense.createdAt).toLocaleString()})]}),currentExpense.approvals&&currentExpense.approvals.map((approval,index)=>{var _approval$approver,_approval$approver2;return/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-semibold\",children:approval.status==='APPROVED'?'Approved':approval.status==='REJECTED'?'Rejected':'Pending'}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"By: \",(_approval$approver=approval.approver)===null||_approval$approver===void 0?void 0:_approval$approver.firstName,\" \",(_approval$approver2=approval.approver)===null||_approval$approver2===void 0?void 0:_approval$approver2.lastName]}),approval.actionDate&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:new Date(approval.actionDate).toLocaleString()}),approval.comments&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block\",children:[\"\\\"\",approval.comments,\"\\\"\"]})]},index);})]})})]})})]})]});};export default ExpenseDetails;","map":{"version":3,"names":["React","useEffect","useParams","Link","useExpense","jsx","_jsx","jsxs","_jsxs","ExpenseDetails","id","getExpense","currentExpense","loading","className","children","to","title","status","concat","description","amount","currency","category","replace","Date","expenseDate","toLocaleDateString","toLowerCase","receipts","length","map","receipt","index","src","filename","alt","originalName","createdAt","toLocaleString","approvals","approval","_approval$approver","_approval$approver2","approver","firstName","lastName","actionDate","comments"],"sources":["C:/Madhav Dodiya/Expense-management-mern/expense-management-mern/frontend/src/pages/ExpenseDetails.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { useExpense } from '../context/ExpenseContext';\r\n\r\nconst ExpenseDetails = () => {\r\n  const { id } = useParams();\r\n  const { getExpense, currentExpense, loading } = useExpense();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      getExpense(id);\r\n    }\r\n  }, [id]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center py-4\">\r\n        <div className=\"loading-spinner mb-3\"></div>\r\n        <p className=\"text-muted\">Loading expense details...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentExpense) {\r\n    return (\r\n      <div className=\"text-center py-4\">\r\n        <p className=\"text-muted\">Expense not found</p>\r\n        <Link to=\"/expenses\" className=\"btn btn-primary\">Back to Expenses</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fade-in\">\r\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <div>\r\n          <h1 className=\"h2 mb-0\">Expense Details</h1>\r\n          <p className=\"text-muted mb-0\">{currentExpense.title}</p>\r\n        </div>\r\n        <div>\r\n          <Link to=\"/expenses\" className=\"btn btn-outline-secondary me-2\">\r\n            <i className=\"fas fa-arrow-left me-1\"></i>\r\n            Back\r\n          </Link>\r\n          {currentExpense.status === 'PENDING' && (\r\n            <Link to={`/expenses/${id}/edit`} className=\"btn btn-primary\">\r\n              <i className=\"fas fa-edit me-1\"></i>\r\n              Edit\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <h5>{currentExpense.title}</h5>\r\n              <p className=\"text-muted\">{currentExpense.description}</p>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                  <p><strong>Amount:</strong> ${currentExpense.amount} {currentExpense.currency}</p>\r\n                  <p><strong>Category:</strong> {currentExpense.category.replace('_', ' ')}</p>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                  <p><strong>Date:</strong> {new Date(currentExpense.expenseDate).toLocaleDateString()}</p>\r\n                  <p><strong>Status:</strong> <span className={`status-badge status-${currentExpense.status.toLowerCase()}`}>{currentExpense.status}</span></p>\r\n                </div>\r\n              </div>\r\n\r\n              {currentExpense.receipts && currentExpense.receipts.length > 0 && (\r\n                <div className=\"mt-4\">\r\n                  <h6>Receipts</h6>\r\n                  <div className=\"row\">\r\n                    {currentExpense.receipts.map((receipt, index) => (\r\n                      <div key={index} className=\"col-md-4 mb-3\">\r\n                        <img \r\n                          src={`/uploads/receipts/${receipt.filename}`} \r\n                          alt={receipt.originalName}\r\n                          className=\"receipt-preview img-fluid\"\r\n                        />\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-md-4\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header\">\r\n              <h6 className=\"card-title mb-0\">Approval Timeline</h6>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"expense-timeline\">\r\n                <div className=\"timeline-item\">\r\n                  <div className=\"fw-semibold\">Submitted</div>\r\n                  <small className=\"text-muted\">\r\n                    {new Date(currentExpense.createdAt).toLocaleString()}\r\n                  </small>\r\n                </div>\r\n\r\n                {currentExpense.approvals && currentExpense.approvals.map((approval, index) => (\r\n                  <div key={index} className=\"timeline-item\">\r\n                    <div className=\"fw-semibold\">\r\n                      {approval.status === 'APPROVED' ? 'Approved' : \r\n                       approval.status === 'REJECTED' ? 'Rejected' : 'Pending'}\r\n                    </div>\r\n                    <small className=\"text-muted\">\r\n                      By: {approval.approver?.firstName} {approval.approver?.lastName}\r\n                    </small>\r\n                    {approval.actionDate && (\r\n                      <small className=\"text-muted d-block\">\r\n                        {new Date(approval.actionDate).toLocaleString()}\r\n                      </small>\r\n                    )}\r\n                    {approval.comments && (\r\n                      <small className=\"text-muted d-block\">\r\n                        \"{approval.comments}\"\r\n                      </small>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExpenseDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}